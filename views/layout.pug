include mixins/_loginForm
include mixins/_accountMenu
<!DOCTYPE html>
html(lang="fr")
	head
		// Global site tag (gtag.js) - Google Analytics
		script(async='' src='https://www.googletagmanager.com/gtag/js?id=UA-165061770-1')
		script.
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-165061770-1');
		meta(charset="UTF-8")
		meta(lang="fr")
		meta(name="viewport", content="width=device-width, initial-scale=1.0")
		meta(http-equiv="X-UA-Compatible", content="ie=edge")
		link(rel='stylesheet' href='/style.css')
		link(rel="shortcut icon" type="image/png" href="https://i.postimg.cc/9f1CCCSf/squakr-favicon.png")
		meta(property="og:title" content="Squakr - Le réseau social libre")
		meta(property="og:type" content="website")
		meta(name="keywords" content="squakr, squackr, squaker, squacker, twitter, nwitter, clone, nathn, free, français, france, open, source, social, network, website")
		meta(name="og:site_name" content="Squakr - Le réseau social libre")
		meta(property="og:url" content="Squakr.fr")
		meta(property="og:image" content="https://i.imgur.com/xCsWr5s.png")
		meta(property="og:description" content="Partagez vos pensées avec Squakr, le réseau social libre.")
		meta(name="title" content="Squakr - Le réseau social libre")
		meta(name="description" content="Partagez vos pensées avec Squakr, le réseau social libre.")
		meta(name="robots")
		meta(name="google-site-verification" content="70mICW8vQbJt8_ACd4-vf1WocsCj6x5mg-Cl8n4G1Os")
		title Squakr - Le réseau social libre
		script(src='https://use.fontawesome.com/74eb59777f.js')
		script.
			function GetURLParameter(sParam)
			{
			var sPageURL = window.location.search.substring(1);
			var sURLVariables = sPageURL.split('&');
			for (var i = 0; i < sURLVariables.length; i++)
			{
			var sParameterName = sURLVariables[i].split('=');
			if (sParameterName[0] == sParam)
			{
			return sParameterName[1];
			}
			}
			}
			function GetErrorString(err)
			{
			if(err == '100') return 'Squak non trouvé'
			if(err == '101') return 'Votre lien de confirmation n\'est pas valide. Si votre lien est le bon, veuillez envoyer un email à contact@squakr.fr.'
			if(err == '102') return 'Votre squak ne peut pas être vide'
			if(err == '103') return 'L\'envoi de l\'image a échoué. Si le problème persiste, veuillez contacter un administatreur.'
			if(err == '104') return 'L\'envoi deu squak a échoué. Si le problème persiste, veuillez contacter un administatreur.'
			if(err == '200') return 'Le nom d\'utilisateur ne peut pas être vide'
			if(err == '201') return 'Le nom d\'utilisateur ne peut pas contenir d\'espaces'
			if(err == '202') return 'Le nom d\'utilisateur ne peut pas contenir de caractères spéciaux'
			if(err == '203') return 'L\'email ne peut pas être vide'
			if(err == '204') return 'L\'email spécifié n\'est pas valide'
			if(err == '205') return 'Le mot de passe ne peut pas être vide'
			if(err == '206') return 'La confirmation de mot de passe ne peut pas être vide'
			if(err == '207') return 'Les mots de passe ne correspondent pas'
			if(err == '208') return 'Un utilisateur est déjà inscrit avec ce nom d\'utilisateur'
			if(err == '209') return 'Un utilisateur est déjà inscrit avec cette adresse email'
			if(err == '210') return 'Le nom d\'utilisateur ne peut pas contenir plus de 16 caractères'
			if(err == '300') return 'La connexion a échoué, veuillez réessayer'
			if(err == '301') return 'Vous devez être connecté pour effectuer cette action'
			if(err == '400') return 'La recherche ne peut pas être vide'
			if(err == '402') return 'Vous n\'avez pas assez de permissions pour supprimer ça.'
			return;
			}
			// The function actually applying the offset
			function offsetAnchor() {
			if(location.hash.length !== 0) {
			window.scrollTo(window.scrollX, window.scrollY - 300);
			}
			}

			// This will capture hash changes while on the page
			window.addEventListener("hashchange", offsetAnchor);
			window.setTimeout(offsetAnchor, 1);

	body
		.header
			.wrapper
				#logo
					h1.site_title
						a(href="/")
							img(src="https://i.imgur.com/Q7BAQPv.png" alt="Logo" style="border-radius: 0%;" )
				#navigation
					if user
						+accountMenu()
					else
						form.form_inline(action='/login' method='POST')
							span
								strong
									a(href="/register" style="color: #2C2F33;") S'inscrire
							span ​ · ​
							span
								strong
									a(href="/login" style="color: #2C2F33;") Se connecter
		<br/>
		.content_area
				.search(width= "270px")
					form(action="/search")
						if user && user.lang == "en"
							input.searchTerm(type='text' placeholder='Search an user...' name="query" autocomplete="off")
						else
							input.searchTerm(type='text' placeholder='Rechercher un utilisateur...' name="query" autocomplete="off")
						button.searchButton(type='submit')
							i.fa.fa-search
				h4(style="color: white; text-align: center;")
					script(type="text/javascript").
						var err = ['301', '400', '402', '100', '101', '102', '103', '104']
						var msg = ['200']
						if(err.includes(GetURLParameter('err')))
							document.write(GetErrorString(GetURLParameter('err')) + '<br/ ><a href="/" style="text-decoration: none; color: white; border-bottom: 1px solid white"><small>Fermer</small></a>')
						if(msg.includes(GetURLParameter('msg')))
							document.write('Votre email a bien été confirmé.<br/ ><a href="/" style="text-decoration: none; color: white; border-bottom: 1px solid white"><small>Fermer</small></a>')
				block content
		.footer
			p
				small © 2020 Squakr · v1.7.1 <br/>
					a(href='https://discord.gg/C8WPK2B' target='_blank' style="text-decoration: none; color: #fff;") Discord
					a(href='https://github.com/Nathn/Squakr' target='_blank' style="text-decoration: none; color: #fff;")  - Github
					a(href='https://twitter.com/Squakr_fr' target='_blank' style="text-decoration: none; color: #fff;")  - Twitter
					a(href='/cgu' target='_blank' style="text-decoration: none; color: #fff;")  - CGU <br/>



